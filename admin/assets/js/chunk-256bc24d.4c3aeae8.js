(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-256bc24d","chunk-7567ada7","chunk-af26d374","chunk-5e3ce190","chunk-2d0d8416","chunk-2d22e0fc"],{"1ad0":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{staticStyle:{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"53px"},attrs:{title:"新增菜单",maskClosable:!1,width:"650",placement:"right",closable:!1,visible:e.menuAddVisiable},on:{close:e.onClose}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",e._b({attrs:{label:"菜单名称"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["menuName",{rules:[{required:!0,message:"菜单名称不能为空"},{max:10,message:"长度不能超过10个字符"}]}],expression:"['menuName',\n               {rules: [\n                { required: true, message: '菜单名称不能为空'},\n                { max: 10, message: '长度不能超过10个字符'}\n              ]}]"}],model:{value:e.menu.menuName,callback:function(t){e.$set(e.menu,"menuName",t)},expression:"menu.menuName"}})],1),a("a-form-item",e._b({attrs:{label:"菜单URL"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["path",{rules:[{required:!0,message:"菜单URL不能为空"},{max:50,message:"长度不能超过50个字符"}]}],expression:"['path',\n             {rules: [\n              { required: true, message: '菜单URL不能为空'},\n              { max: 50, message: '长度不能超过50个字符'}\n            ]}]"}],model:{value:e.menu.path,callback:function(t){e.$set(e.menu,"path",t)},expression:"menu.path"}})],1),a("a-form-item",e._b({attrs:{label:"组件地址"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["component",{rules:[{required:!0,message:"组件地址不能为空"},{max:100,message:"长度不能超过100个字符"}]}],expression:"['component',\n             {rules: [\n              { required: true, message: '组件地址不能为空'},\n              { max: 100, message: '长度不能超过100个字符'}\n            ]}]"}],model:{value:e.menu.component,callback:function(t){e.$set(e.menu,"component",t)},expression:"menu.component"}})],1),a("a-form-item",e._b({attrs:{label:"相关权限"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["perms",{rules:[{max:50,message:"长度不能超过50个字符"}]}],expression:"['perms',\n               {rules: [\n                { max: 50, message: '长度不能超过50个字符'}\n              ]}]"}],model:{value:e.menu.perms,callback:function(t){e.$set(e.menu,"perms",t)},expression:"menu.perms"}})],1),a("a-form-item",e._b({attrs:{label:"菜单图标"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{ref:"icons",attrs:{placeholder:"点击右侧按钮选择图标"},model:{value:e.menu.icon,callback:function(t){e.$set(e.menu,"icon",t)},expression:"menu.icon"}},[e.menu.icon?a("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:e.deleteIcons},slot:"suffix"}):e._e(),a("a-icon",{staticStyle:{cursor:"pointer"},attrs:{slot:"addonAfter",type:"setting"},on:{click:e.chooseIcons},slot:"addonAfter"})],1)],1),a("a-form-item",e._b({attrs:{label:"菜单排序"}},"a-form-item",e.formItemLayout,!1),[a("a-input-number",{staticStyle:{width:"100%"},model:{value:e.menu.orderNum,callback:function(t){e.$set(e.menu,"orderNum",t)},expression:"menu.orderNum"}})],1),a("a-form-item",e._b({staticStyle:{"margin-bottom":"2rem"},attrs:{label:"上级菜单"}},"a-form-item",e.formItemLayout,!1),[a("a-tree",{key:e.menuTreeKey,attrs:{checkable:!0,checkStrictly:!0,expandedKeys:e.expandedKeys,treeData:e.menuTreeData},on:{check:e.handleCheck,expand:e.handleExpand}})],1)],1),a("div",{staticClass:"drawer-bootom-button"},[a("a-dropdown",{staticStyle:{float:"left"},attrs:{trigger:["click"],placement:"topCenter"}},[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:e.expandAll}},[e._v("展开所有")]),a("a-menu-item",{key:"2",on:{click:e.closeAll}},[e._v("合并所有")])],1),a("a-button",[e._v("\n                树操作\n                "),a("a-icon",{attrs:{type:"up"}})],1)],1),a("a-popconfirm",{attrs:{title:"确定放弃编辑？",okText:"确定",cancelText:"取消"},on:{confirm:e.onClose}},[a("a-button",{staticStyle:{"margin-right":".8rem"}},[e._v("取消")])],1),a("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v("提交")])],1),a("icons",{attrs:{iconChooseVisible:e.iconChooseVisible},on:{choose:e.handleIconChoose,close:e.handleIconCancel}})],1)},o=[],s=a("cebc"),i=(a("db97"),a("c0a3")),r={labelCol:{span:3},wrapperCol:{span:18}},c={name:"MenuAdd",components:{Icons:i["default"]},props:{menuAddVisiable:{default:!1}},data:function(){return{loading:!1,formItemLayout:r,form:this.$form.createForm(this),menuTreeKey:+new Date,menu:{icon:""},checkedKeys:[],expandedKeys:[],menuTreeData:[],iconChooseVisible:!1}},methods:{reset:function(){this.loading=!1,this.menuTreeKey=+new Date,this.expandedKeys=this.checkedKeys=[],this.menu={},this.form.resetFields()},onClose:function(){this.reset(),this.$emit("close")},handleCheck:function(e){this.checkedKeys=e},expandAll:function(){this.expandedKeys=this.allTreeKeys},closeAll:function(){this.expandedKeys=[]},handleExpand:function(e){this.expandedKeys=e},chooseIcons:function(){this.iconChooseVisible=!0},handleIconCancel:function(){this.iconChooseVisible=!1},handleIconChoose:function(e){this.menu.icon=e,this.iconChooseVisible=!1},deleteIcons:function(){this.menu.icon=""},handleSubmit:function(){var e=this,t=Object.is(this.checkedKeys.checked,void 0)?this.checkedKeys:this.checkedKeys.checked;t.length>1?this.$message.error("最多只能选择一个上级菜单，请修改"):this.form.validateFields(function(a,n){a||(e.loading=!0,t.length?e.menu.parentId=t[0]:e.menu.parentId="",e.menu.type="0",e.$post("menu",Object(s["a"])({},e.menu)).then(function(){e.reset(),e.$emit("success")}).catch(function(){e.loading=!1}))})}},watch:{menuAddVisiable:function(){var e=this;this.menuAddVisiable&&this.$get("menu",{type:"0"}).then(function(t){e.menuTreeData=t.data.rows.children,e.allTreeKeys=t.data.ids})}}},l=c,d=a("2877"),u=Object(d["a"])(l,n,o,!1,null,null,null);t["default"]=u.exports},4270:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-range-picker",{key:e.id,ref:"rangeDate",staticStyle:{width:"100%"},on:{change:e.onChange}})},o=[],s={name:"RangeDate",data:function(){return{id:+new Date}},methods:{onChange:function(e,t){this.$emit("change",t)},reset:function(){this.id=+new Date}}},i=s,r=a("2877"),c=Object(r["a"])(i,n,o,!1,null,null,null);t["a"]=c.exports},"5ca13":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{staticClass:"card-area",attrs:{bordered:!1}},[a("div",{class:e.advanced?"search":null},[a("a-form",{attrs:{layout:"horizontal"}},[a("div",{class:e.advanced?null:"fold"},[a("a-row",[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:"名称",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-input",{model:{value:e.queryParams.menuName,callback:function(t){e.$set(e.queryParams,"menuName",t)},expression:"queryParams.menuName"}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:"创建时间",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("range-date",{ref:"createTime",on:{change:e.handleDateChange}})],1)],1)],1)],1),a("span",{staticStyle:{float:"right","margin-top":"3px"}},[a("a-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.reset}},[e._v("重置")])],1)])],1),a("div",[a("div",{staticClass:"operator"},[a("a-popconfirm",{attrs:{title:"请选择创建类型",okText:"按钮",cancelText:"菜单"},on:{cancel:function(){return e.createMenu()},confirm:function(){return e.createButton()}}},[a("a-icon",{staticStyle:{color:"orangered"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),a("a-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"menu:add",expression:"'menu:add'"}],attrs:{type:"primary",ghost:""}},[e._v("新增")])],1),a("a-button",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"menu:delete",expression:"'menu:delete'"}],on:{click:e.batchDelete}},[e._v("删除")]),a("a-dropdown",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"menu:export",expression:"'menu:export'"}]},[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"export-data",on:{click:e.exprotExccel}},[e._v("导出Excel")])],1),a("a-button",[e._v("\n                    更多操作\n                    "),a("a-icon",{attrs:{type:"down"}})],1)],1)],1),a("a-table",{key:e.key,attrs:{columns:e.columns,dataSource:e.dataSource,pagination:e.pagination,loading:e.loading,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},scroll:{x:1500}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"icon",fn:function(e){return[a("a-icon",{attrs:{type:e}})]}},{key:"type",fn:function(t){return["0"===t?a("a-tag",{attrs:{color:"cyan"}},[e._v(" 菜单")]):e._e(),"1"===t?a("a-tag",{attrs:{color:"pink"}},[e._v(" 按钮")]):e._e()]}},{key:"operation",fn:function(t,n){return[a("a-icon",{directives:[{name:"hasPermission",rawName:"v-hasPermission",value:"menu:update",expression:"'menu:update'"}],attrs:{type:"setting",theme:"twoTone",twoToneColor:"#4a9ff5",title:"修改"},on:{click:function(t){return e.edit(n)}}}),a("a-badge",{directives:[{name:"hasNoPermission",rawName:"v-hasNoPermission",value:"menu:update",expression:"'menu:update'"}],attrs:{status:"warning",text:"无权限"}})]}}])})],1),a("menu-add",{attrs:{menuAddVisiable:e.menuAddVisiable},on:{close:e.handleMenuAddClose,success:e.handleMenuAddSuccess}}),a("menu-edit",{ref:"menuEdit",attrs:{menuEditVisiable:e.menuEditVisiable},on:{close:e.handleMenuEditClose,success:e.handleMenuEditSuccess}}),a("button-add",{attrs:{buttonAddVisiable:e.buttonAddVisiable},on:{close:e.handleButtonAddClose,success:e.handleButtonAddSuccess}}),a("button-edit",{ref:"buttonEdit",attrs:{buttonEditVisiable:e.buttonEditVisiable},on:{close:e.handleButtonEditClose,success:e.handleButtonEditSuccess}})],1)},o=[],s=(a("db97"),a("cebc")),i=(a("6762"),a("2fdb"),a("4270")),r=a("1ad0"),c=a("bb96"),l=a("79fd"),d=a("f9c6"),u={name:"Menu",components:{ButtonAdd:l["default"],ButtonEdit:d["default"],RangeDate:i["a"],MenuAdd:r["default"],MenuEdit:c["default"]},data:function(){return{advanced:!1,key:+new Date,queryParams:{},filteredInfo:null,dataSource:[],selectedRowKeys:[],pagination:{defaultPageSize:1e7,hideOnSinglePage:!0,indentSize:100},loading:!1,menuAddVisiable:!1,menuEditVisiable:!1,buttonAddVisiable:!1,buttonEditVisiable:!1}},computed:{columns:function(){var e=this.filteredInfo;return e=e||{},[{title:"名称",dataIndex:"text",width:200,fixed:"left"},{title:"图标",dataIndex:"icon",scopedSlots:{customRender:"icon"}},{title:"类型",dataIndex:"type",scopedSlots:{customRender:"type"},filters:[{text:"按钮",value:"1"},{text:"菜单",value:"0"}],filterMultiple:!1,filteredValue:e.type||null,onFilter:function(e,t){return t.type.includes(e)}},{title:"地址",dataIndex:"path"},{title:"Vue组件",dataIndex:"component"},{title:"权限",dataIndex:"permission"},{title:"排序",dataIndex:"order"},{title:"创建时间",dataIndex:"createTime"},{title:"修改时间",dataIndex:"modifyTime"},{title:"操作",dataIndex:"operation",width:120,scopedSlots:{customRender:"operation"},fixed:"right"}]}},mounted:function(){this.fetch()},methods:{onSelectChange:function(e){this.selectedRowKeys=e},handleMenuEditClose:function(){this.menuEditVisiable=!1},handleMenuEditSuccess:function(){this.menuEditVisiable=!1,this.$message.success("修改菜单成功"),this.fetch()},handleButtonEditClose:function(){this.buttonEditVisiable=!1},handleButtonEditSuccess:function(){this.buttonEditVisiable=!1,this.$message.success("修改按钮成功"),this.fetch()},edit:function(e){"0"===e.type?(this.$refs.menuEdit.setFormValues(e),this.menuEditVisiable=!0):(this.$refs.buttonEdit.setFormValues(e),this.buttonEditVisiable=!0)},handleButtonAddClose:function(){this.buttonAddVisiable=!1},handleButtonAddSuccess:function(){this.buttonAddVisiable=!1,this.$message.success("新增按钮成功"),this.fetch()},createButton:function(){this.buttonAddVisiable=!0},handleMenuAddClose:function(){this.menuAddVisiable=!1},handleMenuAddSuccess:function(){this.menuAddVisiable=!1,this.$message.success("新增菜单成功"),this.fetch()},createMenu:function(){this.menuAddVisiable=!0},handleDateChange:function(e){e&&(this.queryParams.createTimeFrom=e[0],this.queryParams.createTimeTo=e[1])},batchDelete:function(){if(this.selectedRowKeys.length){var e=this;this.$confirm({title:"确定删除所选中的记录?",content:"当您点击确定按钮后，这些记录将会被彻底删除，如果其包含子记录，也将一并删除！",centered:!0,onOk:function(){e.$delete("menu/"+e.selectedRowKeys.join(",")).then(function(){e.$message.success("删除成功"),e.selectedRowKeys=[],e.fetch()})},onCancel:function(){e.selectedRowKeys=[]}})}else this.$message.warning("请选择需要删除的记录")},exprotExccel:function(){var e=this.filteredInfo;this.$export("menu/excel",Object(s["a"])({},this.queryParams,e))},search:function(){var e=this.filteredInfo;this.fetch(Object(s["a"])({},this.queryParams,e))},reset:function(){this.selectedRowKeys=[],this.filteredInfo=null,this.queryParams={},this.$refs.createTime.reset(),this.fetch()},handleTableChange:function(e,t,a){this.filteredInfo=t,this.fetch(Object(s["a"])({sortField:a.field,sortOrder:a.order},this.queryParams,t))},fetch:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,this.$get("menu",Object(s["a"])({},t)).then(function(t){var a=t.data;e.loading=!1,Object.is(a.rows.children,void 0)?e.dataSource=a.rows:e.dataSource=a.rows.children})}}},m=u,h=(a("7eb7"),a("2877")),f=Object(h["a"])(m,n,o,!1,null,"e07ecd22",null);t["default"]=f.exports},6386:function(e,t,a){"use strict";var n=a("a73f"),o=a.n(n);o.a},"79fd":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{staticStyle:{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"53px"},attrs:{title:"新增按钮",maskClosable:!1,width:"650",placement:"right",closable:!1,visible:e.buttonAddVisiable},on:{close:e.onClose}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",e._b({attrs:{label:"按钮名称"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["menuName",{rules:[{required:!0,message:"按钮名称不能为空"},{max:10,message:"长度不能超过10个字符"}]}],expression:"['menuName',\n               {rules: [\n                { required: true, message: '按钮名称不能为空'},\n                { max: 10, message: '长度不能超过10个字符'}\n              ]}]"}],model:{value:e.button.menuName,callback:function(t){e.$set(e.button,"menuName",t)},expression:"button.menuName"}})],1),a("a-form-item",e._b({attrs:{label:"相关权限"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["perms",{rules:[{max:50,message:"长度不能超过50个字符"}]}],expression:"['perms',\n               {rules: [\n                { max: 50, message: '长度不能超过50个字符'}\n              ]}]"}],model:{value:e.button.perms,callback:function(t){e.$set(e.button,"perms",t)},expression:"button.perms"}})],1),a("a-form-item",e._b({staticStyle:{"margin-bottom":"2rem"},attrs:{label:"上级菜单"}},"a-form-item",e.formItemLayout,!1),[a("a-tree",{key:e.menuTreeKey,attrs:{checkable:!0,checkStrictly:!0,expandedKeys:e.expandedKeys,treeData:e.menuTreeData},on:{check:e.handleCheck,expand:e.handleExpand}})],1)],1),a("div",{staticClass:"drawer-bootom-button"},[a("a-dropdown",{staticStyle:{float:"left"},attrs:{trigger:["click"],placement:"topCenter"}},[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:e.expandAll}},[e._v("展开所有")]),a("a-menu-item",{key:"2",on:{click:e.closeAll}},[e._v("合并所有")])],1),a("a-button",[e._v("\n                树操作\n                "),a("a-icon",{attrs:{type:"up"}})],1)],1),a("a-popconfirm",{attrs:{title:"确定放弃编辑？",okText:"确定",cancelText:"取消"},on:{confirm:e.onClose}},[a("a-button",{staticStyle:{"margin-right":".8rem"}},[e._v("取消")])],1),a("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},o=[],s=a("cebc"),i=(a("db97"),{labelCol:{span:3},wrapperCol:{span:18}}),r={name:"ButtonAdd",props:{buttonAddVisiable:{default:!1}},data:function(){return{loading:!1,formItemLayout:i,form:this.$form.createForm(this),menuTreeKey:+new Date,button:{},checkedKeys:[],expandedKeys:[],menuTreeData:[]}},methods:{reset:function(){this.loading=!1,this.menuTreeKey=+new Date,this.expandedKeys=this.checkedKeys=[],this.button={},this.form.resetFields()},onClose:function(){this.reset(),this.$emit("close")},handleCheck:function(e){this.checkedKeys=e},expandAll:function(){this.expandedKeys=this.allTreeKeys},closeAll:function(){this.expandedKeys=[]},handleExpand:function(e){this.expandedKeys=e},handleSubmit:function(){var e=this,t=Object.is(this.checkedKeys.checked,void 0)?this.checkedKeys:this.checkedKeys.checked;t.length?t.length>1?this.$message.error("最多只能选择一个上级菜单，请修改"):this.form.validateFields(function(a,n){a||(e.loading=!0,t.length?e.button.parentId=t[0]:e.button.parentId="",e.button.type="1",e.$post("menu",Object(s["a"])({},e.button)).then(function(){e.reset(),e.$emit("success")}).catch(function(){e.loading=!1}))}):this.$message.error("请为按钮选择一个上级菜单")}},watch:{buttonAddVisiable:function(){var e=this;this.buttonAddVisiable&&this.$get("menu",{type:"0"}).then(function(t){e.menuTreeData=t.data.rows.children,e.allTreeKeys=t.data.ids})}}},c=r,l=a("2877"),d=Object(l["a"])(c,n,o,!1,null,null,null);t["default"]=d.exports},"7eb7":function(e,t,a){"use strict";var n=a("c560"),o=a.n(n);o.a},a73f:function(e,t,a){},bb96:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{staticStyle:{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"53px"},attrs:{title:"修改菜单",maskClosable:!1,width:"650",placement:"right",closable:!1,visible:e.menuEditVisiable},on:{close:e.onClose}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",e._b({attrs:{label:"菜单名称"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["menuName",{rules:[{required:!0,message:"菜单名称不能为空"},{max:10,message:"长度不能超过10个字符"}]}],expression:"['menuName',\n               {rules: [\n                { required: true, message: '菜单名称不能为空'},\n                { max: 10, message: '长度不能超过10个字符'}\n              ]}]"}]})],1),a("a-form-item",e._b({attrs:{label:"菜单URL"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["path",{rules:[{required:!0,message:"菜单URL不能为空"},{max:50,message:"长度不能超过50个字符"}]}],expression:"['path',\n             {rules: [\n              { required: true, message: '菜单URL不能为空'},\n              { max: 50, message: '长度不能超过50个字符'}\n            ]}]"}]})],1),a("a-form-item",e._b({attrs:{label:"组件地址"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["component",{rules:[{required:!0,message:"组件地址不能为空"},{max:100,message:"长度不能超过100个字符"}]}],expression:"['component',\n             {rules: [\n              { required: true, message: '组件地址不能为空'},\n              { max: 100, message: '长度不能超过100个字符'}\n            ]}]"}]})],1),a("a-form-item",e._b({attrs:{label:"相关权限"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["perms",{rules:[{max:50,message:"长度不能超过50个字符"}]}],expression:"['perms',\n               {rules: [\n                { max: 50, message: '长度不能超过50个字符'}\n              ]}]"}]})],1),a("a-form-item",e._b({directives:[{name:"decorator",rawName:"v-decorator",value:["icon"],expression:"['icon']"}],attrs:{label:"菜单图标"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{attrs:{placeholder:"点击右侧按钮选择图标"},model:{value:e.menu.icon,callback:function(t){e.$set(e.menu,"icon",t)},expression:"menu.icon"}},[e.menu.icon?a("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:e.deleteIcons},slot:"suffix"}):e._e(),a("a-icon",{staticStyle:{cursor:"pointer"},attrs:{slot:"addonAfter",type:"setting"},on:{click:e.chooseIcons},slot:"addonAfter"})],1)],1),a("a-form-item",e._b({attrs:{label:"菜单排序"}},"a-form-item",e.formItemLayout,!1),[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["orderNum"],expression:"['orderNum']"}],staticStyle:{width:"100%"}})],1),a("a-form-item",e._b({staticStyle:{"margin-bottom":"2rem"},attrs:{label:"上级菜单"}},"a-form-item",e.formItemLayout,!1),[a("a-tree",{key:e.menuTreeKey,ref:"menuTree",attrs:{checkable:!0,checkStrictly:!0,expandedKeys:e.expandedKeys,defaultCheckedKeys:e.defaultCheckedKeys,treeData:e.menuTreeData},on:{check:e.handleCheck,expand:e.handleExpand}})],1)],1),a("div",{staticClass:"drawer-bootom-button"},[a("a-dropdown",{staticStyle:{float:"left"},attrs:{trigger:["click"],placement:"topCenter"}},[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:e.expandAll}},[e._v("展开所有")]),a("a-menu-item",{key:"2",on:{click:e.closeAll}},[e._v("合并所有")])],1),a("a-button",[e._v("\n                树操作\n                "),a("a-icon",{attrs:{type:"up"}})],1)],1),a("a-popconfirm",{attrs:{title:"确定放弃编辑？",okText:"确定",cancelText:"取消"},on:{confirm:e.onClose}},[a("a-button",{staticStyle:{"margin-right":".8rem"}},[e._v("取消")])],1),a("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v("提交")])],1),a("icons",{attrs:{iconChooseVisible:e.iconChooseVisible},on:{choose:e.handleIconChoose,close:e.handleIconCancel}})],1)},o=[],s=a("cebc"),i=(a("db97"),a("456d"),a("ac6a"),a("c0a3")),r={labelCol:{span:3},wrapperCol:{span:18}},c={name:"MenuEdit",components:{Icons:i["default"]},props:{menuEditVisiable:{default:!1}},data:function(){return{loading:!1,formItemLayout:r,form:this.$form.createForm(this),menuTreeKey:+new Date,menu:{icon:""},checkedKeys:[],expandedKeys:[],menuTreeData:[],defaultCheckedKeys:[],iconChooseVisible:!1}},methods:{reset:function(){this.loading=!1,this.menuTreeKey=+new Date,this.expandedKeys=this.checkedKeys=this.defaultCheckedKeys=[],this.menu={},this.form.resetFields()},onClose:function(){this.reset(),this.$emit("close")},handleCheck:function(e){this.checkedKeys=e},expandAll:function(){this.expandedKeys=this.allTreeKeys},closeAll:function(){this.expandedKeys=[]},handleExpand:function(e){this.expandedKeys=e},chooseIcons:function(){this.iconChooseVisible=!0},handleIconCancel:function(){this.iconChooseVisible=!1},handleIconChoose:function(e){this.menu.icon=e,this.iconChooseVisible=!1},deleteIcons:function(){this.menu.icon=""},setFormValues:function(e){var t=this,a=Object.assign({},e),n=["path","component","icon"];Object.keys(a).forEach(function(e){if(-1!==n.indexOf(e)){t.form.getFieldDecorator(e);var o={};o[e]=a[e],t.form.setFieldsValue(o)}}),this.form.getFieldDecorator("menuName"),this.form.setFieldsValue({menuName:a.text}),this.form.getFieldDecorator("perms"),this.form.setFieldsValue({perms:a.permission}),this.form.getFieldDecorator("orderNum"),this.form.setFieldsValue({orderNum:a.order}),this.menu.icon=a.icon,"0"!==a.parentId&&(this.defaultCheckedKeys.push(a.parentId),this.checkedKeys=this.defaultCheckedKeys,this.expandedKeys=this.checkedKeys),this.menu.menuId=a.id,this.menuTreeKey=+new Date},handleSubmit:function(){var e=this,t=Object.is(this.checkedKeys.checked,void 0)?this.checkedKeys:this.checkedKeys.checked;t.length>1?this.$message.error("最多只能选择一个上级菜单，请修改"):t[0]!==this.menu.menuId?this.form.validateFields(function(a,n){if(!a){e.loading=!0;var o=e.menu.icon,i=e.form.getFieldsValue();i.icon=o,i.menuId=e.menu.menuId,t.length?i.parentId=t[0]:i.parentId="",i.type="0",e.$put("menu",Object(s["a"])({},i)).then(function(){e.reset(),e.$emit("success")}).catch(function(){e.loading=!1})}}):this.$message.error("不能选择自己作为上级菜单，请修改")}},watch:{menuEditVisiable:function(){var e=this;this.menuEditVisiable&&this.$get("menu",{type:"0"}).then(function(t){e.menuTreeData=t.data.rows.children,e.allTreeKeys=t.data.ids,e.menuTreeKey=+new Date})}}},l=c,d=a("2877"),u=Object(d["a"])(l,n,o,!1,null,null,null);t["default"]=u.exports},c0a3:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{width:900,keyboard:!1,closable:!1,centered:!0,maskClosable:!1,mask:!1,okText:"确认",cancelText:"取消"},on:{ok:e.ok,cancel:e.cancel},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("a-tabs",[a("a-tab-pane",{key:"1",attrs:{tab:"方向性图标"}},[a("ul",e._l(e.icons.directionIcons,function(t){return a("li",{key:t},[a("a-icon",{class:{active:e.activeIndex===t},attrs:{type:t,title:t},on:{click:function(a){return e.chooseIcon(t)}}})],1)}),0)]),a("a-tab-pane",{key:"2",attrs:{tab:"指示性图标"}},[a("ul",e._l(e.icons.suggestionIcons,function(t){return a("li",{key:t},[a("a-icon",{class:{active:e.activeIndex===t},attrs:{type:t,title:t},on:{click:function(a){return e.chooseIcon(t)}}})],1)}),0)]),a("a-tab-pane",{key:"3",attrs:{tab:"编辑类图标"}},[a("ul",e._l(e.icons.editIcons,function(t){return a("li",{key:t},[a("a-icon",{class:{active:e.activeIndex===t},attrs:{type:t,title:t},on:{click:function(a){return e.chooseIcon(t)}}})],1)}),0)]),a("a-tab-pane",{key:"4",attrs:{tab:"数据类图标"}},[a("ul",e._l(e.icons.dataIcons,function(t){return a("li",{key:t},[a("a-icon",{class:{active:e.activeIndex===t},attrs:{type:t,title:t},on:{click:function(a){return e.chooseIcon(t)}}})],1)}),0)]),a("a-tab-pane",{key:"5",attrs:{tab:"网站通用图标"}},[a("ul",e._l(e.icons.webIcons,function(t){return a("li",{key:t},[a("a-icon",{class:{active:e.activeIndex===t},attrs:{type:t,title:t},on:{click:function(a){return e.chooseIcon(t)}}})],1)}),0)]),a("a-tab-pane",{key:"6",attrs:{tab:"品牌和标识"}},[a("ul",e._l(e.icons.logoIcons,function(t){return a("li",{key:t},[a("a-icon",{class:{active:e.activeIndex===t},attrs:{type:t,title:t},on:{click:function(a){return e.chooseIcon(t)}}})],1)}),0)])],1)],1)},o=[],s=["step-backward","step-forward","fast-backward","fast-forward","shrink","arrows-alt","down","up","left","right","caret-up","caret-down","caret-left","caret-right","up-circle","down-circle","left-circle","right-circle","up-circle-o","down-circle-o","right-circle-o","left-circle-o","double-right","double-left","vertical-left","vertical-right","forward","backward","rollback","enter","retweet","swap","swap-left","swap-right","arrow-up","arrow-down","arrow-left","arrow-right","play-circle","play-circle-o","up-square","down-square","left-square","right-square","up-square-o","down-square-o","left-square-o","right-square-o","login","logout","menu-fold","menu-unfold","border-bottom","border-horizontal","border-inner","border-left","border-right","border-top","border-verticle","pic-center","pic-left","pic-right","radius-bottomleft","radius-bottomright","radius-upleft","radius-upright","fullscreen","fullscreen-exit"],i=["question","question-circle","plus","plus-circle","pause","pause-circle","minus","minus-circle","plus-square","minus-square","info","info-circle","exclamation","exclamation-circle","close","close-circle","close-square","check","check-circle","check-square","clock-circle","warning","issues-close","stop"],r=["edit","form","copy","scissor","delete","snippets","diff","highlight","align-center","align-left","align-right","bg-colors","bold","italic","underline","strikethrough","redo","undo","zoom-in","zoom-out","font-colors","font-size","line-height","colum-height","dash","small-dash","sort-ascending","sort-descending","drag","ordered-list","radius-setting"],c=["area-chart","pie-chart","bar-chart","dot-chart","line-chart","radar-chart","heat-map","fall","rise","stock","box-plot","fund","sliders"],l=["lock","unlock","bars","book","calendar","cloud","cloud-download","code","copy","credit-card","delete","desktop","download","ellipsis","file","file-text","file-unknown","file-pdf","file-word","file-excel","file-jpg","file-ppt","file-markdown","file-add","folder","folder-open","folder-add","hdd","frown","meh","smile","inbox","laptop","appstore","link","mail","mobile","notification","paper-clip","picture","poweroff","reload","search","setting","share-alt","shopping-cart","tablet","tag","tags","to-top","upload","user","video-camera","home","loading","loading-3-quarters","cloud-upload","star","heart","environment","eye","camera","save","team","solution","phone","filter","exception","export","customer-service","qrcode","scan","like","dislike","message","pay-circle","calculator","pushpin","bulb","select","switcher","rocket","bell","disconnect","database","compass","barcode","hourglass","key","flag","layout","printer","sound","usb","skin","tool","sync","wifi","car","schedule","user-add","user-delete","usergroup-add","usergroup-delete","man","woman","shop","gift","idcard","medicine-box","red-envelope","coffee","copyright","trademark","safety","wallet","bank","trophy","contacts","global","shake","api","fork","dashboard","table","profile","alert","audit","branches","build","border","crown","experiment","fire","money-collect","property-safety","read","reconciliation","rest","security-scan","insurance","interation","safety-certificate","project","thunderbolt","block","cluster","deployment-unit","dollar","euro","pound","file-done","file-exclamation","file-protect","file-search","file-sync","gateway","gold","robot","shopping"],d=["android","apple","windows","ie","chrome","github","aliwangwang","dingding","weibo-square","weibo-circle","taobao-circle","html5","weibo","twitter","wechat","youtube","alipay-circle","taobao","skype","qq","medium-workmark","gitlab","medium","linkedin","google-plus","dropbox","facebook","codepen","amazon","google","codepen-circle","alipay","ant-design","aliyun","zhihu","slack","slack-square","behance","behance-square","dribbble","dribbble-square","instagram","yuque","alibaba","yahoo"],u={name:"Icons",props:{iconChooseVisible:{default:!1}},data:function(){return{icons:{directionIcons:s,suggestionIcons:i,editIcons:r,dataIcons:c,webIcons:l,logoIcons:d},choosedIcon:"",activeIndex:""}},computed:{show:{get:function(){return this.iconChooseVisible},set:function(){}}},methods:{reset:function(){this.activeIndex=""},chooseIcon:function(e){this.activeIndex=e,this.choosedIcon=e,this.$message.success("选中 ".concat(e))},ok:function(){""!==this.choosedIcon?(this.reset(),this.$emit("choose",this.choosedIcon)):this.$message.warning("尚未选择任何图标")},cancel:function(){this.reset(),this.$emit("close")}}},m=u,h=(a("6386"),a("2877")),f=Object(h["a"])(m,n,o,!1,null,"1262542e",null);t["default"]=f.exports},c560:function(e,t,a){},f9c6:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{staticStyle:{height:"calc(100% - 55px)",overflow:"auto","padding-bottom":"53px"},attrs:{title:"修改按钮",maskClosable:!1,width:"650",placement:"right",closable:!1,visible:e.buttonEditVisiable},on:{close:e.onClose}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",e._b({attrs:{label:"按钮名称"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["menuName",{rules:[{required:!0,message:"按钮名称不能为空"},{max:10,message:"长度不能超过10个字符"}]}],expression:"['menuName',\n               {rules: [\n                { required: true, message: '按钮名称不能为空'},\n                { max: 10, message: '长度不能超过10个字符'}\n              ]}]"}]})],1),a("a-form-item",e._b({attrs:{label:"相关权限"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["perms",{rules:[{max:50,message:"长度不能超过50个字符"}]}],expression:"['perms',\n               {rules: [\n                { max: 50, message: '长度不能超过50个字符'}\n              ]}]"}]})],1),a("a-form-item",e._b({staticStyle:{"margin-bottom":"2rem"},attrs:{label:"上级菜单"}},"a-form-item",e.formItemLayout,!1),[a("a-tree",{key:e.menuTreeKey,attrs:{checkable:!0,checkStrictly:!0,expandedKeys:e.expandedKeys,defaultCheckedKeys:e.defaultCheckedKeys,treeData:e.menuTreeData},on:{check:e.handleCheck,expand:e.handleExpand}})],1)],1),a("div",{staticClass:"drawer-bootom-button"},[a("a-dropdown",{staticStyle:{float:"left"},attrs:{trigger:["click"],placement:"topCenter"}},[a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",{key:"1",on:{click:e.expandAll}},[e._v("展开所有")]),a("a-menu-item",{key:"2",on:{click:e.closeAll}},[e._v("合并所有")])],1),a("a-button",[e._v("\n                树操作\n                "),a("a-icon",{attrs:{type:"up"}})],1)],1),a("a-popconfirm",{attrs:{title:"确定放弃编辑？",okText:"确定",cancelText:"取消"},on:{confirm:e.onClose}},[a("a-button",{staticStyle:{"margin-right":".8rem"}},[e._v("取消")])],1),a("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v("提交")])],1)],1)},o=[],s=a("cebc"),i=(a("db97"),{labelCol:{span:3},wrapperCol:{span:18}}),r={name:"ButtonEdit",props:{buttonEditVisiable:{default:!1}},data:function(){return{loading:!1,formItemLayout:i,form:this.$form.createForm(this),menuTreeKey:+new Date,button:{},checkedKeys:[],expandedKeys:[],defaultCheckedKeys:[],menuTreeData:[]}},methods:{reset:function(){this.loading=!1,this.menuTreeKey=+new Date,this.expandedKeys=this.checkedKeys=this.defaultCheckedKeys=[],this.button={},this.form.resetFields()},onClose:function(){this.reset(),this.$emit("close")},handleCheck:function(e){this.checkedKeys=e},expandAll:function(){this.expandedKeys=this.allTreeKeys},closeAll:function(){this.expandedKeys=[]},handleExpand:function(e){this.expandedKeys=e},setFormValues:function(e){var t=Object.assign({},e);this.form.getFieldDecorator("menuName"),this.form.setFieldsValue({menuName:t.text}),this.form.getFieldDecorator("perms"),this.form.setFieldsValue({perms:t.permission}),this.defaultCheckedKeys.push(t.parentId),this.checkedKeys=this.defaultCheckedKeys,this.expandedKeys=this.checkedKeys,this.button.menuId=t.id},handleSubmit:function(){var e=this,t=Object.is(this.checkedKeys.checked,void 0)?this.checkedKeys:this.checkedKeys.checked;t.length?t.length>1?this.$message.error("最多只能选择一个上级菜单，请修改"):this.form.validateFields(function(a,n){if(!a){e.loading=!0;var o=e.form.getFieldsValue();o.parentId=t[0],o.type="1",o.menuId=e.button.menuId,e.$put("menu",Object(s["a"])({},o)).then(function(){e.reset(),e.$emit("success")}).catch(function(){e.loading=!1})}}):this.$message.error("请为按钮选择一个上级菜单")}},watch:{buttonEditVisiable:function(){var e=this;this.buttonEditVisiable&&this.$get("menu",{type:"0"}).then(function(t){e.menuTreeData=t.data.rows.children,e.allTreeKeys=t.data.ids,e.menuTreeKey=+new Date})}}},c=r,l=a("2877"),d=Object(l["a"])(c,n,o,!1,null,null,null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-256bc24d.4c3aeae8.js.map