{"version":3,"sources":["webpack:///./src/views/system/menu/ButtonAdd.vue?300f","webpack:///src/views/system/menu/ButtonAdd.vue","webpack:///./src/views/system/menu/ButtonAdd.vue?1576","webpack:///./src/views/system/menu/ButtonAdd.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","height","overflow","padding-bottom","attrs","title","maskClosable","width","placement","closable","visible","buttonAddVisiable","on","close","onClose","form","_b","label","formItemLayout","directives","name","rawName","value","rules","required","message","max","expression","model","button","callback","$$v","$set","margin-bottom","key","menuTreeKey","checkable","checkStrictly","expandedKeys","treeData","menuTreeData","check","handleCheck","expand","handleExpand","staticClass","float","trigger","slot","click","expandAll","_v","closeAll","type","okText","cancelText","confirm","margin-right","loading","handleSubmit","staticRenderFns","labelCol","span","wrapperCol","ButtonAddvue_type_script_lang_js_","props","default","data","$form","createForm","Date","checkedKeys","methods","reset","resetFields","$emit","allTreeKeys","_this","checkedArr","Object","is","checked","undefined","length","$message","error","validateFields","err","values","parentId","$post","objectSpread","then","catch","watch","_this2","$get","r","rows","children","ids","menu_ButtonAddvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"assets/js/chunk-2d0d8416.c56d1ffb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-drawer',{staticStyle:{\"height\":\"calc(100% - 55px)\",\"overflow\":\"auto\",\"padding-bottom\":\"53px\"},attrs:{\"title\":\"新增按钮\",\"maskClosable\":false,\"width\":\"650\",\"placement\":\"right\",\"closable\":false,\"visible\":_vm.buttonAddVisiable},on:{\"close\":_vm.onClose}},[_c('a-form',{attrs:{\"form\":_vm.form}},[_c('a-form-item',_vm._b({attrs:{\"label\":\"按钮名称\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['menuName',\n               {rules: [\n                { required: true, message: '按钮名称不能为空'},\n                { max: 10, message: '长度不能超过10个字符'}\n              ]}]),expression:\"['menuName',\\n               {rules: [\\n                { required: true, message: '按钮名称不能为空'},\\n                { max: 10, message: '长度不能超过10个字符'}\\n              ]}]\"}],model:{value:(_vm.button.menuName),callback:function ($$v) {_vm.$set(_vm.button, \"menuName\", $$v)},expression:\"button.menuName\"}})],1),_c('a-form-item',_vm._b({attrs:{\"label\":\"相关权限\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['perms',\n               {rules: [\n                { max: 50, message: '长度不能超过50个字符'}\n              ]}]),expression:\"['perms',\\n               {rules: [\\n                { max: 50, message: '长度不能超过50个字符'}\\n              ]}]\"}],model:{value:(_vm.button.perms),callback:function ($$v) {_vm.$set(_vm.button, \"perms\", $$v)},expression:\"button.perms\"}})],1),_c('a-form-item',_vm._b({staticStyle:{\"margin-bottom\":\"2rem\"},attrs:{\"label\":\"上级菜单\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-tree',{key:_vm.menuTreeKey,attrs:{\"checkable\":true,\"checkStrictly\":true,\"expandedKeys\":_vm.expandedKeys,\"treeData\":_vm.menuTreeData},on:{\"check\":_vm.handleCheck,\"expand\":_vm.handleExpand}})],1)],1),_c('div',{staticClass:\"drawer-bootom-button\"},[_c('a-dropdown',{staticStyle:{\"float\":\"left\"},attrs:{\"trigger\":['click'],\"placement\":\"topCenter\"}},[_c('a-menu',{attrs:{\"slot\":\"overlay\"},slot:\"overlay\"},[_c('a-menu-item',{key:\"1\",on:{\"click\":_vm.expandAll}},[_vm._v(\"展开所有\")]),_c('a-menu-item',{key:\"2\",on:{\"click\":_vm.closeAll}},[_vm._v(\"合并所有\")])],1),_c('a-button',[_vm._v(\"\\n                树操作\\n                \"),_c('a-icon',{attrs:{\"type\":\"up\"}})],1)],1),_c('a-popconfirm',{attrs:{\"title\":\"确定放弃编辑？\",\"okText\":\"确定\",\"cancelText\":\"取消\"},on:{\"confirm\":_vm.onClose}},[_c('a-button',{staticStyle:{\"margin-right\":\".8rem\"}},[_vm._v(\"取消\")])],1),_c('a-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"提交\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <a-drawer\n            title=\"新增按钮\"\n            :maskClosable=\"false\"\n            width=650\n            placement=\"right\"\n            :closable=\"false\"\n            @close=\"onClose\"\n            :visible=\"buttonAddVisiable\"\n            style=\"height: calc(100% - 55px);overflow: auto;padding-bottom: 53px;\">\n        <a-form :form=\"form\">\n            <a-form-item label='按钮名称' v-bind=\"formItemLayout\">\n                <a-input v-model=\"button.menuName\"\n                         v-decorator=\"['menuName',\n                   {rules: [\n                    { required: true, message: '按钮名称不能为空'},\n                    { max: 10, message: '长度不能超过10个字符'}\n                  ]}]\"/>\n            </a-form-item>\n            <a-form-item label='相关权限' v-bind=\"formItemLayout\">\n                <a-input v-model=\"button.perms\"\n                         v-decorator=\"['perms',\n                   {rules: [\n                    { max: 50, message: '长度不能超过50个字符'}\n                  ]}]\"/>\n            </a-form-item>\n            <a-form-item label='上级菜单'\n                         style=\"margin-bottom: 2rem\"\n                         v-bind=\"formItemLayout\">\n                <a-tree\n                        :key=\"menuTreeKey\"\n                        :checkable=\"true\"\n                        :checkStrictly=\"true\"\n                        @check=\"handleCheck\"\n                        @expand=\"handleExpand\"\n                        :expandedKeys=\"expandedKeys\"\n                        :treeData=\"menuTreeData\">\n                </a-tree>\n            </a-form-item>\n        </a-form>\n        <div class=\"drawer-bootom-button\">\n            <a-dropdown style=\"float: left\" :trigger=\"['click']\" placement=\"topCenter\">\n                <a-menu slot=\"overlay\">\n                    <a-menu-item key=\"1\" @click=\"expandAll\">展开所有</a-menu-item>\n                    <a-menu-item key=\"2\" @click=\"closeAll\">合并所有</a-menu-item>\n                </a-menu>\n                <a-button>\n                    树操作\n                    <a-icon type=\"up\"/>\n                </a-button>\n            </a-dropdown>\n            <a-popconfirm title=\"确定放弃编辑？\" @confirm=\"onClose\" okText=\"确定\" cancelText=\"取消\">\n                <a-button style=\"margin-right: .8rem\">取消</a-button>\n            </a-popconfirm>\n            <a-button @click=\"handleSubmit\" type=\"primary\" :loading=\"loading\">提交</a-button>\n        </div>\n    </a-drawer>\n</template>\n<script>\n    const formItemLayout = {\n        labelCol: {span: 3},\n        wrapperCol: {span: 18}\n    };\n    export default {\n        name: 'ButtonAdd',\n        props: {\n            buttonAddVisiable: {\n                default: false\n            }\n        },\n        data() {\n            return {\n                loading: false,\n                formItemLayout,\n                form: this.$form.createForm(this),\n                menuTreeKey: +new Date(),\n                button: {},\n                checkedKeys: [],\n                expandedKeys: [],\n                menuTreeData: []\n            }\n        },\n        methods: {\n            reset() {\n                this.loading = false;\n                this.menuTreeKey = +new Date();\n                this.expandedKeys = this.checkedKeys = [];\n                this.button = {};\n                this.form.resetFields()\n            },\n            onClose() {\n                this.reset();\n                this.$emit('close')\n            },\n            handleCheck(checkedKeys) {\n                this.checkedKeys = checkedKeys\n            },\n            expandAll() {\n                this.expandedKeys = this.allTreeKeys\n            },\n            closeAll() {\n                this.expandedKeys = []\n            },\n            handleExpand(expandedKeys) {\n                this.expandedKeys = expandedKeys\n            },\n            handleSubmit() {\n                let checkedArr = Object.is(this.checkedKeys.checked, undefined) ? this.checkedKeys : this.checkedKeys.checked;\n                if (!checkedArr.length) {\n                    this.$message.error('请为按钮选择一个上级菜单');\n                    return\n                }\n                if (checkedArr.length > 1) {\n                    this.$message.error('最多只能选择一个上级菜单，请修改');\n                    return\n                }\n                this.form.validateFields((err, values) => {\n                    if (!err) {\n                        this.loading = true;\n                        if (checkedArr.length) {\n                            this.button.parentId = checkedArr[0]\n                        } else {\n                            this.button.parentId = ''\n                        }\n                        // 0 表示菜单 1 表示按钮\n                        this.button.type = '1';\n                        this.$post('menu', {\n                            ...this.button\n                        }).then(() => {\n                            this.reset();\n                            this.$emit('success')\n                        }).catch(() => {\n                            this.loading = false\n                        })\n                    }\n                })\n            }\n        },\n        watch: {\n            buttonAddVisiable() {\n                if (this.buttonAddVisiable) {\n                    this.$get('menu', {\n                        type: '0'\n                    }).then((r) => {\n                        this.menuTreeData = r.data.rows.children\n                        this.allTreeKeys = r.data.ids\n                    })\n                }\n            }\n        }\n    }\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ButtonAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ButtonAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ButtonAdd.vue?vue&type=template&id=4644e4f1&\"\nimport script from \"./ButtonAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./ButtonAdd.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}