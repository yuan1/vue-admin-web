{"version":3,"sources":["webpack:///./src/views/system/role/RoleAdd.vue?2f1d","webpack:///src/views/system/role/RoleAdd.vue","webpack:///./src/views/system/role/RoleAdd.vue?0e96","webpack:///./src/views/system/role/RoleAdd.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","height","overflow","padding-bottom","attrs","title","maskClosable","width","placement","closable","visible","roleAddVisiable","on","close","onClose","form","_b","label","validateStatus","help","formItemLayout","directives","name","rawName","value","expression","blur","handleRoleNameBlur","model","role","callback","$$v","$set","rules","max","message","rows","margin-bottom","menuSelectStatus","menuSelectHelp","key","menuTreeKey","ref","checkable","checkStrictly","expandedKeys","treeData","menuTreeData","check","handleCheck","expand","handleExpand","staticClass","float","trigger","slot","click","expandAll","_v","closeAll","enableRelate","disableRelate","type","okText","cancelText","confirm","margin-right","loading","handleSubmit","staticRenderFns","labelCol","span","wrapperCol","RoleAddvue_type_script_lang_js_","props","default","data","Date","$form","createForm","roleName","remark","menuId","checkedKeys","allTreeKeys","methods","reset","resetFields","$emit","checkedArr","Object","is","checked","undefined","length","_this","validateFields","err","values","join","$post","objectSpread","then","r","catch","_this2","trim","$get","concat","watch","_this3","children","ids","role_RoleAddvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"assets/js/chunk-2d0b5f98.4ab81866.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-drawer',{staticStyle:{\"height\":\"calc(100% - 55px)\",\"overflow\":\"auto\",\"padding-bottom\":\"53px\"},attrs:{\"title\":\"新增角色\",\"maskClosable\":false,\"width\":\"650\",\"placement\":\"right\",\"closable\":false,\"visible\":_vm.roleAddVisiable},on:{\"close\":_vm.onClose}},[_c('a-form',{attrs:{\"form\":_vm.form}},[_c('a-form-item',_vm._b({attrs:{\"label\":\"角色名称\",\"validateStatus\":_vm.validateStatus,\"help\":_vm.help}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['roleName']),expression:\"['roleName']\"}],on:{\"blur\":_vm.handleRoleNameBlur},model:{value:(_vm.role.roleName),callback:function ($$v) {_vm.$set(_vm.role, \"roleName\", $$v)},expression:\"role.roleName\"}})],1),_c('a-form-item',_vm._b({attrs:{\"label\":\"角色描述\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-textarea',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:([\n      'remark',\n      {rules: [\n        { max: 50, message: '长度不能超过50个字符'}\n      ]}]),expression:\"[\\n      'remark',\\n      {rules: [\\n        { max: 50, message: '长度不能超过50个字符'}\\n      ]}]\"}],attrs:{\"rows\":4},model:{value:(_vm.role.remark),callback:function ($$v) {_vm.$set(_vm.role, \"remark\", $$v)},expression:\"role.remark\"}})],1),_c('a-form-item',_vm._b({staticStyle:{\"margin-bottom\":\"2rem\"},attrs:{\"label\":\"权限选择\",\"validateStatus\":_vm.menuSelectStatus,\"help\":_vm.menuSelectHelp}},'a-form-item',_vm.formItemLayout,false),[_c('a-tree',{key:_vm.menuTreeKey,ref:\"menuTree\",attrs:{\"checkable\":true,\"checkStrictly\":_vm.checkStrictly,\"expandedKeys\":_vm.expandedKeys,\"treeData\":_vm.menuTreeData},on:{\"check\":_vm.handleCheck,\"expand\":_vm.handleExpand}})],1)],1),_c('div',{staticClass:\"drawer-bootom-button\"},[_c('a-dropdown',{staticStyle:{\"float\":\"left\"},attrs:{\"trigger\":['click'],\"placement\":\"topCenter\"}},[_c('a-menu',{attrs:{\"slot\":\"overlay\"},slot:\"overlay\"},[_c('a-menu-item',{key:\"1\",on:{\"click\":_vm.expandAll}},[_vm._v(\"展开所有\")]),_c('a-menu-item',{key:\"2\",on:{\"click\":_vm.closeAll}},[_vm._v(\"合并所有\")]),_c('a-menu-item',{key:\"3\",on:{\"click\":_vm.enableRelate}},[_vm._v(\"父子关联\")]),_c('a-menu-item',{key:\"4\",on:{\"click\":_vm.disableRelate}},[_vm._v(\"取消关联\")])],1),_c('a-button',[_vm._v(\"\\n                树操作\\n                \"),_c('a-icon',{attrs:{\"type\":\"up\"}})],1)],1),_c('a-popconfirm',{attrs:{\"title\":\"确定放弃编辑？\",\"okText\":\"确定\",\"cancelText\":\"取消\"},on:{\"confirm\":_vm.onClose}},[_c('a-button',{staticStyle:{\"margin-right\":\".8rem\"}},[_vm._v(\"取消\")])],1),_c('a-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"提交\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <a-drawer\n            title=\"新增角色\"\n            :maskClosable=\"false\"\n            width=650\n            placement=\"right\"\n            :closable=\"false\"\n            @close=\"onClose\"\n            :visible=\"roleAddVisiable\"\n            style=\"height: calc(100% - 55px);overflow: auto;padding-bottom: 53px;\">\n        <a-form :form=\"form\">\n            <a-form-item label='角色名称'\n                         v-bind=\"formItemLayout\"\n                         :validateStatus=\"validateStatus\"\n                         :help=\"help\">\n                <a-input @blur=\"handleRoleNameBlur\" v-model=\"role.roleName\" v-decorator=\"['roleName']\"/>\n            </a-form-item>\n            <a-form-item label='角色描述' v-bind=\"formItemLayout\">\n                <a-textarea\n                        :rows=\"4\"\n                        v-model=\"role.remark\"\n                        v-decorator=\"[\n          'remark',\n          {rules: [\n            { max: 50, message: '长度不能超过50个字符'}\n          ]}]\">\n                </a-textarea>\n            </a-form-item>\n            <a-form-item label='权限选择'\n                         style=\"margin-bottom: 2rem\"\n                         :validateStatus=\"menuSelectStatus\"\n                         :help=\"menuSelectHelp\"\n                         v-bind=\"formItemLayout\">\n                <a-tree\n                        :key=\"menuTreeKey\"\n                        ref=\"menuTree\"\n                        :checkable=\"true\"\n                        :checkStrictly=\"checkStrictly\"\n                        @check=\"handleCheck\"\n                        @expand=\"handleExpand\"\n                        :expandedKeys=\"expandedKeys\"\n                        :treeData=\"menuTreeData\">\n                </a-tree>\n            </a-form-item>\n        </a-form>\n        <div class=\"drawer-bootom-button\">\n            <a-dropdown style=\"float: left\" :trigger=\"['click']\" placement=\"topCenter\">\n                <a-menu slot=\"overlay\">\n                    <a-menu-item key=\"1\" @click=\"expandAll\">展开所有</a-menu-item>\n                    <a-menu-item key=\"2\" @click=\"closeAll\">合并所有</a-menu-item>\n                    <a-menu-item key=\"3\" @click=\"enableRelate\">父子关联</a-menu-item>\n                    <a-menu-item key=\"4\" @click=\"disableRelate\">取消关联</a-menu-item>\n                </a-menu>\n                <a-button>\n                    树操作\n                    <a-icon type=\"up\"/>\n                </a-button>\n            </a-dropdown>\n            <a-popconfirm title=\"确定放弃编辑？\" @confirm=\"onClose\" okText=\"确定\" cancelText=\"取消\">\n                <a-button style=\"margin-right: .8rem\">取消</a-button>\n            </a-popconfirm>\n            <a-button @click=\"handleSubmit\" type=\"primary\" :loading=\"loading\">提交</a-button>\n        </div>\n    </a-drawer>\n</template>\n<script>\n    const formItemLayout = {\n        labelCol: {span: 3},\n        wrapperCol: {span: 18}\n    }\n    export default {\n        name: 'RoleAdd',\n        props: {\n            roleAddVisiable: {\n                default: false\n            }\n        },\n        data() {\n            return {\n                menuTreeKey: +new Date(),\n                loading: false,\n                formItemLayout,\n                form: this.$form.createForm(this),\n                validateStatus: '',\n                menuSelectStatus: '',\n                help: '',\n                menuSelectHelp: '',\n                role: {\n                    roleName: '',\n                    remark: '',\n                    menuId: ''\n                },\n                checkedKeys: [],\n                expandedKeys: [],\n                menuTreeData: [],\n                allTreeKeys: [],\n                checkStrictly: true\n            }\n        },\n        methods: {\n            reset() {\n                this.menuTreeKey = +new Date()\n                this.expandedKeys = this.checkedKeys = []\n                this.validateStatus = this.help = ''\n                this.loading = false\n                this.form.resetFields()\n            },\n            onClose() {\n                this.reset()\n                this.$emit('close')\n            },\n            expandAll() {\n                this.expandedKeys = this.allTreeKeys\n            },\n            closeAll() {\n                this.expandedKeys = []\n            },\n            enableRelate() {\n                this.checkStrictly = false\n            },\n            disableRelate() {\n                this.checkStrictly = true\n            },\n            handleCheck(checkedKeys) {\n                this.checkedKeys = checkedKeys\n                let checkedArr = Object.is(checkedKeys.checked, undefined) ? checkedKeys : checkedKeys.checked\n                if (checkedArr.length) {\n                    this.menuSelectStatus = ''\n                    this.menuSelectHelp = ''\n                } else {\n                    this.menuSelectStatus = 'error'\n                    this.menuSelectHelp = '请选择相应的权限'\n                }\n            },\n            handleExpand(expandedKeys) {\n                this.expandedKeys = expandedKeys\n            },\n            handleSubmit() {\n                let checkedArr = Object.is(this.checkedKeys.checked, undefined) ? this.checkedKeys : this.checkedKeys.checked\n                if (this.validateStatus !== 'success') {\n                    this.handleRoleNameBlur()\n                } else if (checkedArr.length === 0) {\n                    this.menuSelectStatus = 'error'\n                    this.menuSelectHelp = '请选择相应的权限'\n                } else {\n                    this.form.validateFields((err, values) => {\n                        if (!err) {\n                            this.loading = true\n                            this.role.menuId = checkedArr.join(',')\n                            this.$post('role', {\n                                ...this.role\n                            }).then((r) => {\n                                this.reset()\n                                this.$emit('success')\n                            }).catch(() => {\n                                this.loading = false\n                            })\n                        }\n                    })\n                }\n            },\n            handleRoleNameBlur() {\n                let roleName = this.role.roleName.trim()\n                if (roleName.length) {\n                    if (roleName.length > 10) {\n                        this.validateStatus = 'error'\n                        this.help = '角色名称不能超过10个字符'\n                    } else {\n                        this.validateStatus = 'validating'\n                        this.$get(`role/check/${roleName}`).then((r) => {\n                            if (r.data) {\n                                this.validateStatus = 'success'\n                                this.help = ''\n                            } else {\n                                this.validateStatus = 'error'\n                                this.help = '抱歉，该角色名称已存在'\n                            }\n                        })\n                    }\n                } else {\n                    this.validateStatus = 'error'\n                    this.help = '角色名称不能为空'\n                }\n            }\n        },\n        watch: {\n            roleAddVisiable() {\n                if (this.roleAddVisiable) {\n                    this.$get('menu').then((r) => {\n                        this.menuTreeData = r.data.rows.children\n                        this.allTreeKeys = r.data.ids\n                    })\n                }\n            }\n        }\n    }\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RoleAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RoleAdd.vue?vue&type=template&id=3ca2dcbe&\"\nimport script from \"./RoleAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./RoleAdd.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}