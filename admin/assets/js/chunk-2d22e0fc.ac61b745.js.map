{"version":3,"sources":["webpack:///./src/views/system/menu/ButtonEdit.vue?0d76","webpack:///src/views/system/menu/ButtonEdit.vue","webpack:///./src/views/system/menu/ButtonEdit.vue?5a81","webpack:///./src/views/system/menu/ButtonEdit.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","height","overflow","padding-bottom","attrs","title","maskClosable","width","placement","closable","visible","buttonEditVisiable","on","close","onClose","form","_b","label","formItemLayout","directives","name","rawName","value","rules","required","message","max","expression","margin-bottom","key","menuTreeKey","checkable","checkStrictly","expandedKeys","defaultCheckedKeys","treeData","menuTreeData","check","handleCheck","expand","handleExpand","staticClass","float","trigger","slot","click","expandAll","_v","closeAll","type","okText","cancelText","confirm","margin-right","loading","handleSubmit","staticRenderFns","labelCol","span","wrapperCol","ButtonEditvue_type_script_lang_js_","props","default","data","$form","createForm","Date","button","checkedKeys","methods","reset","resetFields","$emit","allTreeKeys","setFormValues","_ref","menu","Object","assign","getFieldDecorator","setFieldsValue","menuName","text","perms","permission","push","parentId","menuId","id","_this","checkedArr","is","checked","undefined","length","$message","error","validateFields","err","values","getFieldsValue","$put","objectSpread","then","catch","watch","_this2","$get","r","rows","children","ids","menu_ButtonEditvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"assets/js/chunk-2d22e0fc.ac61b745.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a-drawer',{staticStyle:{\"height\":\"calc(100% - 55px)\",\"overflow\":\"auto\",\"padding-bottom\":\"53px\"},attrs:{\"title\":\"修改按钮\",\"maskClosable\":false,\"width\":\"650\",\"placement\":\"right\",\"closable\":false,\"visible\":_vm.buttonEditVisiable},on:{\"close\":_vm.onClose}},[_c('a-form',{attrs:{\"form\":_vm.form}},[_c('a-form-item',_vm._b({attrs:{\"label\":\"按钮名称\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['menuName',\n               {rules: [\n                { required: true, message: '按钮名称不能为空'},\n                { max: 10, message: '长度不能超过10个字符'}\n              ]}]),expression:\"['menuName',\\n               {rules: [\\n                { required: true, message: '按钮名称不能为空'},\\n                { max: 10, message: '长度不能超过10个字符'}\\n              ]}]\"}]})],1),_c('a-form-item',_vm._b({attrs:{\"label\":\"相关权限\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['perms',\n               {rules: [\n                { max: 50, message: '长度不能超过50个字符'}\n              ]}]),expression:\"['perms',\\n               {rules: [\\n                { max: 50, message: '长度不能超过50个字符'}\\n              ]}]\"}]})],1),_c('a-form-item',_vm._b({staticStyle:{\"margin-bottom\":\"2rem\"},attrs:{\"label\":\"上级菜单\"}},'a-form-item',_vm.formItemLayout,false),[_c('a-tree',{key:_vm.menuTreeKey,attrs:{\"checkable\":true,\"checkStrictly\":true,\"expandedKeys\":_vm.expandedKeys,\"defaultCheckedKeys\":_vm.defaultCheckedKeys,\"treeData\":_vm.menuTreeData},on:{\"check\":_vm.handleCheck,\"expand\":_vm.handleExpand}})],1)],1),_c('div',{staticClass:\"drawer-bootom-button\"},[_c('a-dropdown',{staticStyle:{\"float\":\"left\"},attrs:{\"trigger\":['click'],\"placement\":\"topCenter\"}},[_c('a-menu',{attrs:{\"slot\":\"overlay\"},slot:\"overlay\"},[_c('a-menu-item',{key:\"1\",on:{\"click\":_vm.expandAll}},[_vm._v(\"展开所有\")]),_c('a-menu-item',{key:\"2\",on:{\"click\":_vm.closeAll}},[_vm._v(\"合并所有\")])],1),_c('a-button',[_vm._v(\"\\n                树操作\\n                \"),_c('a-icon',{attrs:{\"type\":\"up\"}})],1)],1),_c('a-popconfirm',{attrs:{\"title\":\"确定放弃编辑？\",\"okText\":\"确定\",\"cancelText\":\"取消\"},on:{\"confirm\":_vm.onClose}},[_c('a-button',{staticStyle:{\"margin-right\":\".8rem\"}},[_vm._v(\"取消\")])],1),_c('a-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"提交\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <a-drawer\n            title=\"修改按钮\"\n            :maskClosable=\"false\"\n            width=650\n            placement=\"right\"\n            :closable=\"false\"\n            @close=\"onClose\"\n            :visible=\"buttonEditVisiable\"\n            style=\"height: calc(100% - 55px);overflow: auto;padding-bottom: 53px;\">\n        <a-form :form=\"form\">\n            <a-form-item label='按钮名称' v-bind=\"formItemLayout\">\n                <a-input v-decorator=\"['menuName',\n                   {rules: [\n                    { required: true, message: '按钮名称不能为空'},\n                    { max: 10, message: '长度不能超过10个字符'}\n                  ]}]\"/>\n            </a-form-item>\n            <a-form-item label='相关权限' v-bind=\"formItemLayout\">\n                <a-input v-decorator=\"['perms',\n                   {rules: [\n                    { max: 50, message: '长度不能超过50个字符'}\n                  ]}]\"/>\n            </a-form-item>\n            <a-form-item label='上级菜单'\n                         style=\"margin-bottom: 2rem\"\n                         v-bind=\"formItemLayout\">\n                <a-tree\n                        :key=\"menuTreeKey\"\n                        :checkable=\"true\"\n                        :checkStrictly=\"true\"\n                        @check=\"handleCheck\"\n                        @expand=\"handleExpand\"\n                        :expandedKeys=\"expandedKeys\"\n                        :defaultCheckedKeys=\"defaultCheckedKeys\"\n                        :treeData=\"menuTreeData\">\n                </a-tree>\n            </a-form-item>\n        </a-form>\n        <div class=\"drawer-bootom-button\">\n            <a-dropdown style=\"float: left\" :trigger=\"['click']\" placement=\"topCenter\">\n                <a-menu slot=\"overlay\">\n                    <a-menu-item key=\"1\" @click=\"expandAll\">展开所有</a-menu-item>\n                    <a-menu-item key=\"2\" @click=\"closeAll\">合并所有</a-menu-item>\n                </a-menu>\n                <a-button>\n                    树操作\n                    <a-icon type=\"up\"/>\n                </a-button>\n            </a-dropdown>\n            <a-popconfirm title=\"确定放弃编辑？\" @confirm=\"onClose\" okText=\"确定\" cancelText=\"取消\">\n                <a-button style=\"margin-right: .8rem\">取消</a-button>\n            </a-popconfirm>\n            <a-button @click=\"handleSubmit\" type=\"primary\" :loading=\"loading\">提交</a-button>\n        </div>\n    </a-drawer>\n</template>\n<script>\n    const formItemLayout = {\n        labelCol: {span: 3},\n        wrapperCol: {span: 18}\n    };\n    export default {\n        name: 'ButtonEdit',\n        props: {\n            buttonEditVisiable: {\n                default: false\n            }\n        },\n        data() {\n            return {\n                loading: false,\n                formItemLayout,\n                form: this.$form.createForm(this),\n                menuTreeKey: +new Date(),\n                button: {},\n                checkedKeys: [],\n                expandedKeys: [],\n                defaultCheckedKeys: [],\n                menuTreeData: []\n            }\n        },\n        methods: {\n            reset() {\n                this.loading = false;\n                this.menuTreeKey = +new Date();\n                this.expandedKeys = this.checkedKeys = this.defaultCheckedKeys = [];\n                this.button = {};\n                this.form.resetFields()\n            },\n            onClose() {\n                this.reset();\n                this.$emit('close')\n            },\n            handleCheck(checkedKeys) {\n                this.checkedKeys = checkedKeys\n            },\n            expandAll() {\n                this.expandedKeys = this.allTreeKeys\n            },\n            closeAll() {\n                this.expandedKeys = []\n            },\n            handleExpand(expandedKeys) {\n                this.expandedKeys = expandedKeys\n            },\n            setFormValues({...menu}) {\n                this.form.getFieldDecorator('menuName');\n                this.form.setFieldsValue({'menuName': menu.text});\n                this.form.getFieldDecorator('perms');\n                this.form.setFieldsValue({'perms': menu.permission});\n\n                this.defaultCheckedKeys.push(menu.parentId);\n                this.checkedKeys = this.defaultCheckedKeys;\n                this.expandedKeys = this.checkedKeys;\n                this.button.menuId = menu.id\n            },\n            handleSubmit() {\n                let checkedArr = Object.is(this.checkedKeys.checked, undefined) ? this.checkedKeys : this.checkedKeys.checked;\n                if (!checkedArr.length) {\n                    this.$message.error('请为按钮选择一个上级菜单');\n                    return\n                }\n                if (checkedArr.length > 1) {\n                    this.$message.error('最多只能选择一个上级菜单，请修改');\n                    return\n                }\n                this.form.validateFields((err, values) => {\n                    if (!err) {\n                        this.loading = true;\n                        let button = this.form.getFieldsValue();\n                        button.parentId = checkedArr[0];\n                        // 0 表示菜单 1 表示按钮\n                        button.type = '1';\n                        button.menuId = this.button.menuId;\n                        this.$put('menu', {\n                            ...button\n                        }).then(() => {\n                            this.reset();\n                            this.$emit('success')\n                        }).catch(() => {\n                            this.loading = false\n                        })\n                    }\n                })\n            }\n        },\n        watch: {\n            buttonEditVisiable() {\n                if (this.buttonEditVisiable) {\n                    this.$get('menu', {\n                        type: '0'\n                    }).then((r) => {\n                        this.menuTreeData = r.data.rows.children;\n                        this.allTreeKeys = r.data.ids;\n                        this.menuTreeKey = +new Date()\n                    })\n                }\n            }\n        }\n    }\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ButtonEdit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ButtonEdit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ButtonEdit.vue?vue&type=template&id=0a234c06&\"\nimport script from \"./ButtonEdit.vue?vue&type=script&lang=js&\"\nexport * from \"./ButtonEdit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}